<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de la Campagne Publicitaire</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>Analyse de la Campagne Publicitaire</h1>
        <p class="text-center">Th√© Noir Darjeeling Bio</p>

        <!-- Lightbox container -->
        <div class="lightbox" id="lightbox">
            <span class="close-lightbox">&times;</span>
            <img src="" alt="Image en grand format">
        </div>

        <!-- Section 1 -->
        <section class="section">
            <div class="text-content">
                <h2>Pages les plus visit√©es</h2>
                <p>Ce graphique met en √©vidence les 10 pages les plus consult√©es sur notre site web. Il nous permet
                    d'identifier les contenus qui g√©n√®rent le plus d'int√©r√™t, r√©v√©lant les th√©matiques les plus
                    populaires ou les parcours utilisateur les plus fr√©quents.</p>
            </div>
            <div class="image-content" onclick="openLightbox('top_pages.png')">
                <img src="top_pages.png" alt="Top 10 des pages les plus visit√©es">
            </div>
        </section>

        <!-- Section 2 -->
        <section class="section">
            <div class="text-content">
                <h2>Dur√©e des actions</h2>
                <p>Cette repr√©sentation illustre le temps total pass√© par les utilisateurs sur chaque type d'action
                    disponible sur le site. Elle met en lumi√®re les activit√©s les plus engageantes.</p>
            </div>
            <div class="image-content" onclick="openLightbox('action_minutes.png')">
                <img src="action_minutes.png" alt="Dur√©e des actions">
            </div>
        </section>

        <!-- Section 3 -->
        <section class="section">
            <div class="text-content">
                <h2>R√©partition g√©ographique</h2>
                <p>Le graphique pr√©sente les 10 principales villes d'origine de nos visiteurs. Cette r√©partition
                    g√©ographique permet d'identifier nos zones d'influence.</p>
            </div>
            <div class="image-content" onclick="openLightbox('cities.png')">
                <img src="cities.png" alt="R√©partition g√©ographique">
            </div>
        </section>

        <!-- Section 4 -->
        <section class="section">
            <div class="text-content">
                <h2>R√©partition par appareil</h2>
                <p>Ce graphique circulaire montre la r√©partition des utilisateurs en fonction du type d'appareil utilis√©
                    pour naviguer.</p>
            </div>
            <div class="image-content" onclick="openLightbox('devices.png')">
                <img src="devices.png" alt="R√©partition par appareil">
            </div>
        </section>

        <!-- Section 5 -->
        <section class="section">
            <div class="text-content">
                <h2>Produits les plus populaires</h2>
                <p>Ce graphique met en avant les 10 produits les plus achet√©s par nos clients. Il refl√®te les tendances
                    de consommation et les pr√©f√©rences du march√©.</p>
            </div>
            <div class="image-content" onclick="openLightbox('products.png')">
                <img src="products.png" alt="Produits les plus populaires">
            </div>
        </section>

        <!-- Section 6 -->
        <section class="section">
            <div class="text-content">
                <h2>Analyse des intentions</h2>
                <p>Cette visualisation cat√©gorise les visites en fonction de leur intention : commerciale ou
                    transactionnelle.</p>
            </div>
            <div class="image-content" onclick="openLightbox('intentions.png')">
                <img src="intentions.png" alt="Analyse des intentions">
            </div>
        </section>

        <!-- Section 7 -->
        <section class="section">
            <div class="text-content">
                <h2>√âvolution des sessions</h2>
                <p>Ce graphique temporel retrace le nombre de sessions journali√®res sur une p√©riode donn√©e.</p>
            </div>
            <div class="image-content" onclick="openLightbox('sessions_par_jour.png')">
                <img src="sessions_par_jour.png" alt="√âvolution des sessions">
            </div>
        </section>

        <!-- Section 8 - Sources des donn√©es -->
        <section class="section">
            <div class="text-content">
                <h2>Sources des donn√©es</h2>
                <p>Les tableaux ci-dessous affichent le contenu des fichiers CSV utilis√©s pour les visualisations.</p>

                <div class="csv-wrapper">
                    <div class="csv-header">
                        <span>üìä donnees.csv</span>
                        <button class="toggle-btn" onclick="toggleTable('table-donnees')">Voir plus</button>
                    </div>
                    <div id="table-donnees" class="csv-container"></div>
                </div>

                <div class="csv-wrapper">
                    <div class="csv-header">
                        <span>üìä Intentions_par_session.csv</span>
                        <button class="toggle-btn" onclick="toggleTable('table-intentions')">Voir plus</button>
                    </div>
                    <div id="table-intentions" class="csv-container"></div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Lightbox
        function openLightbox(imageSrc) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = lightbox.querySelector('img');
            lightboxImg.src = imageSrc;
            lightbox.classList.add('active');
        }

        document.querySelector('.close-lightbox').addEventListener('click', function () {
            document.getElementById('lightbox').classList.remove('active');
        });

        document.getElementById('lightbox').addEventListener('click', function (e) {
            if (e.target === this) {
                this.classList.remove('active');
            }
        });

        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                document.getElementById('lightbox').classList.remove('active');
            }
        });

        // Table toggle
        function toggleTable(tableId) {
            const table = document.getElementById(tableId);
            const button = table.previousElementSibling.querySelector('button');
            const isVisible = !table.classList.contains('hidden');

            table.classList.toggle('hidden');
            button.textContent = isVisible ? 'Voir plus' : 'Voir moins';
        }

        // Load CSV data
        async function loadCSVToTable(file, containerId) {
            const response = await fetch(file);
            const text = await response.text();
            const rows = text.split('\n').filter(row => row.trim() !== '');
            const table = document.createElement('table');

            rows.forEach((row, rowIndex) => {
                const tr = document.createElement('tr');
                const cells = row.split(',');

                cells.forEach(cell => {
                    const td = document.createElement(rowIndex === 0 ? 'th' : 'td');
                    td.textContent = cell;
                    tr.appendChild(td);
                });

                table.appendChild(tr);
            });

            document.getElementById(containerId).appendChild(table);
        }

        loadCSVToTable('donnees_cleaned.csv', 'table-donnees');
        loadCSVToTable('Intentions_par_session.csv', 'table-intentions');
    </script>
</body>

</html>